В данном примере мы создаем контейнеры для Prometheus, Grafana, Node Exporter и Alertmanager
Мы пробрасываем порты для доступа к веб-интерфейсам Prometheus (9090), Grafana (3000), Node Exporter (9100) и Alertmanager (9093).
Вы также можете задать пароль администратора Grafana, заменив your_admin_password на свой пароль.


Чтобы запустить все контейнеры с помощью Docker Compose, сохраните этот файл как docker-compose.yml и выполните следующую команду в той же директории, где находится файл:
docker-compose up -d

После выполнения этой команды все контейнеры будут запущены, и вы сможете открыть веб-интерфейсы
Prometheus (http://localhost:9090)
Grafana (http://localhost:3000)
Exporter (http://localhost:9100)
Alertmanager (http://localhost:9093)

Для конфиг файла alertmanager

В этом файле конфигурации:

- global: Устанавливаем таймаут для разрешения уведомлений на 5 минут.
- route: Определяем правила группировки и отправки уведомлений.
- receivers: Создаем нового получателя с именем telegram и указываем параметры для отправки уведомлений в Telegram. Замените <YOUR_BOT_TOKEN> и <YOUR_CHAT_ID> на ваши данные.
- inhibit_rules: Определяем правило подавления уведомлений для определенных условий.


Убедитесь, что заменили <YOUR_BOT_TOKEN> и <YOUR_CHAT_ID> на свои данные Telegram бота и ID чата. 
Поместите этот файл в директорию ./alertmanager (как указано в Docker Compose файле) и запустите сервис Alertmanager.

Чтобы узнать ID чата для вашего Telegram бота, выполните следующие шаги:
1. Откройте Telegram и найдите бота, для которого вы хотите узнать ID чата.
2. Начните диалог с этим ботом, отправив ему любое сообщение.
3. После того как вы отправили сообщение боту, перейдите на сайт https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates, заменяя <YOUR_BOT_TOKEN> на токен вашего бота.
4. На этой странице вы увидите JSON-ответ с информацией о последних обновлениях для вашего бота. Найдите объект chat внутри объекта message и скопируйте значение id этого объекта. Это и будет ID чата для вашего бота.


На сайте прома надо найти telegram config и добавить его в prometheus.yml 
